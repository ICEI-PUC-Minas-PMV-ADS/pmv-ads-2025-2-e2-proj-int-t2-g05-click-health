@model ClickHealth.Dashboard.Models.ViewModels.UsuariosCreateViewModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    ViewData["Title"] = "Criar Conta";
}

<div class="auth-wrap">
    <div class="w-100">

        <div class="brand">
            <img src="~/img/logo.png" alt="Click Health" />
        </div>

        <div class="auth-card mx-auto">
            <h2 class="auth-title">Crie sua Conta</h2>

            <form asp-action="Create" method="post" enctype="multipart/form-data" novalidate>
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(false, "", new { @class = "text-danger" })

                <!-- FOTO -->
                <label class="avatar" title="Adicionar foto">
                    <span id="avatarText">Adicionar foto</span>
                    <img id="avatarPreview" alt="" style="display:none;" />
                    <input asp-for="Foto" type="file" accept="image/*" id="avatarFile" />
                </label>

                <!-- Nome -->
                <div class="mb-3">
                    <label class="form-label">Nome Completo</label>
                    <input asp-for="DadosPessoais" class="form-control" />
                </div>

                <!-- Data Nascimento -->
                <div class="mb-3">
                    <label class="form-label">Data de Nascimento</label>
                    <input asp-for="DataNascimento" type="date" class="form-control" />
                </div>

                <!-- Email -->
                <div class="mb-3">
                    <label class="form-label">E-mail</label>
                    <input asp-for="Email" class="form-control" type="email" />
                </div>

                <!-- Senha -->
                <div class="mb-3">
                    <label class="form-label">Senha</label>
                    <input asp-for="Senha" class="form-control" type="password" />
                </div>

                <!-- Confirmar -->
                <div class="mb-4">
                    <label class="form-label">Confirmar Senha</label>
                    <input asp-for="ConfirmarSenha" type="password" class="form-control" />
                </div>

                <button type="submit" class="btn btn-primary w-100 py-2">Cadastrar</button>

                <div class="text-center mt-3">
                    <a asp-controller="Account" asp-action="Login" class="muted-link">Já tem conta? Entrar</a>
                </div>
            </form>

        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        const input = document.getElementById('avatarFile');
        const img = document.getElementById('avatarPreview');
        const txt = document.getElementById('avatarText');

        input.addEventListener('change', e => {
            const [file] = e.target.files || [];
            if (!file) return;
            img.src = URL.createObjectURL(file);
            img.style.display = 'block';
            txt.style.display = 'none';
        });
    </script>
}
